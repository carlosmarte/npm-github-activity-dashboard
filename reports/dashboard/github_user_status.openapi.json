{
  "openapi": "3.0.0",
  "info": {
    "title": "GitHub User Status Report API",
    "version": "1.0.0",
    "description": "API specification for the GitHub User Status report generated by the CLI tool"
  },
  "components": {
    "schemas": {
      "UserStatus": {
        "type": "object",
        "properties": {
          "username": {
            "type": "string",
            "description": "GitHub username"
          },
          "status": {
            "type": "string",
            "enum": ["Active", "Suspended", "Not Found / Suspended", "Error"],
            "description": "User account status"
          },
          "details": {
            "type": "object",
            "properties": {
              "id": {
                "type": "integer",
                "description": "GitHub user ID"
              },
              "name": {
                "type": "string",
                "nullable": true,
                "description": "User's display name"
              },
              "created_at": {
                "type": "string",
                "format": "date-time",
                "description": "Account creation date"
              },
              "updated_at": {
                "type": "string",
                "format": "date-time",
                "description": "Account last update date"
              },
              "public_repos": {
                "type": "integer",
                "description": "Number of public repositories"
              },
              "followers": {
                "type": "integer",
                "description": "Number of followers"
              },
              "following": {
                "type": "integer",
                "description": "Number of users following"
              },
              "bio": {
                "type": "string",
                "nullable": true,
                "description": "User biography"
              },
              "location": {
                "type": "string",
                "nullable": true,
                "description": "User location"
              },
              "company": {
                "type": "string",
                "nullable": true,
                "description": "User company"
              },
              "blog": {
                "type": "string",
                "nullable": true,
                "description": "User blog URL"
              },
              "twitter_username": {
                "type": "string",
                "nullable": true,
                "description": "Twitter username"
              }
            }
          },
          "error": {
            "type": "string",
            "description": "Error message if status is 'Error'"
          }
        },
        "required": ["username", "status"]
      },
      "Summary": {
        "type": "object",
        "properties": {
          "totalUsers": {
            "type": "integer",
            "description": "Total number of users processed"
          },
          "activeUsers": {
            "type": "integer",
            "description": "Number of active users"
          },
          "suspendedUsers": {
            "type": "integer",
            "description": "Number of suspended users"
          },
          "notFoundUsers": {
            "type": "integer",
            "description": "Number of not found users"
          },
          "errorUsers": {
            "type": "integer",
            "description": "Number of users with errors"
          }
        },
        "required": [
          "totalUsers",
          "activeUsers",
          "suspendedUsers",
          "notFoundUsers",
          "errorUsers"
        ]
      },
      "Inputs": {
        "type": "object",
        "properties": {
          "searchUser": {
            "type": "string",
            "description": "GitHub username(s) searched"
          },
          "format": {
            "type": "string",
            "enum": ["json", "csv"],
            "description": "Output format"
          },
          "outputDir": {
            "type": "string",
            "description": "Output directory"
          },
          "filename": {
            "type": "string",
            "description": "Output filename"
          },
          "verbose": {
            "type": "boolean",
            "description": "Verbose logging enabled"
          },
          "debug": {
            "type": "boolean",
            "description": "Debug logging enabled"
          },
          "delay": {
            "type": "integer",
            "description": "Delay between requests in seconds"
          },
          "totalRecords": {
            "type": "integer",
            "description": "Maximum number of records to process"
          },
          "ignoreDateRange": {
            "type": "boolean",
            "description": "Date range ignored"
          }
        }
      },
      "GitHubUserStatusReport": {
        "type": "object",
        "properties": {
          "inputs": {
            "$ref": "#/components/schemas/Inputs"
          },
          "metaTags": {
            "type": "object",
            "additionalProperties": {
              "type": "string"
            },
            "description": "Custom metadata tags"
          },
          "summary": {
            "$ref": "#/components/schemas/Summary"
          },
          "users": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/UserStatus"
            },
            "description": "List of user status results"
          },
          "criteria": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Criteria used for status determination"
          },
          "formula": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Formulas used for status calculation"
          },
          "generatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Report generation timestamp"
          },
          "loadedData": {
            "type": "object",
            "description": "External data loaded at runtime (if any)"
          }
        },
        "required": [
          "inputs",
          "metaTags",
          "summary",
          "users",
          "criteria",
          "formula",
          "generatedAt"
        ]
      }
    }
  },
  "paths": {
    "/": {
      "get": {
        "summary": "GitHub User Status Report Schema",
        "description": "This endpoint describes the structure of the JSON report generated by the GitHub User Status CLI tool",
        "responses": {
          "200": {
            "description": "Successful response with user status report",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GitHubUserStatusReport"
                },
                "examples": {
                  "singleUser": {
                    "summary": "Single active user report",
                    "value": {
                      "inputs": {
                        "searchUser": "octocat",
                        "format": "json",
                        "outputDir": "./output",
                        "filename": "github-user-status",
                        "verbose": false,
                        "debug": false,
                        "delay": 2,
                        "totalRecords": 0,
                        "ignoreDateRange": true
                      },
                      "metaTags": {
                        "environment": "production",
                        "team": "devops"
                      },
                      "summary": {
                        "totalUsers": 1,
                        "activeUsers": 1,
                        "suspendedUsers": 0,
                        "notFoundUsers": 0,
                        "errorUsers": 0
                      },
                      "users": [
                        {
                          "username": "octocat",
                          "status": "Active",
                          "details": {
                            "id": 583231,
                            "name": "The Octocat",
                            "created_at": "2011-01-25T18:44:36Z",
                            "updated_at": "2023-01-01T00:00:00Z",
                            "public_repos": 8,
                            "followers": 4000,
                            "following": 9,
                            "bio": "A proud member of the GitHub team",
                            "location": "San Francisco",
                            "company": "GitHub",
                            "blog": "https://github.blog",
                            "twitter_username": "github"
                          }
                        }
                      ],
                      "criteria": [
                        "HTTP 200 response from /users/{username} = Active user",
                        "HTTP 404 response + user found in search = Suspended user",
                        "HTTP 404 response + user not found in search = Not Found / Suspended user",
                        "Other HTTP errors = Error status"
                      ],
                      "formula": [
                        "status = response.status === 200 ? \"Active\" : await searchForUser(username)",
                        "searchForUser = searchResult.found ? \"Suspended\" : \"Not Found / Suspended\"",
                        "errorHandling = catchError ? \"Error\" : status"
                      ],
                      "generatedAt": "2025-01-01T12:00:00Z"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
